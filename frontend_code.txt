===== frontend/index.html =====
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learnify</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div id="header"></div>
  <main class="main">
  <div class="container">
    <section class="hero">
      <div class="hero__left">
        <span class="hero__badge">BEST E-LEARNING PLATFORM</span>

        <h1 class="hero__title">
          LEARNIFY
        </h1>

        <p class="hero__subtitle">
          Start learning today!
        </p>

      </div>

      <div class="hero__right">
        <img
  src="assets/img/index.png"
  alt="Learnify illustration"
  class="hero__img"
/>
      </div>
    </section>
  </div>
</main>

  <div id="footer"></div>
  <script type="module">
    import { initLayout } from "./assets/js/ui.js";
    initLayout();
  </script>
</body>
</html>===== frontend/register.html =====
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learnify | Register</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div id="header"></div>
  <main class="main">
    <div class="container">
      <div class="card" style="max-width:520px;margin:0 auto;">
        <h2 style="margin:0 0 10px;">Create account</h2>
        <p class="small" style="margin:0 0 16px;">Register as a student and start learning.</p>
        <form class="form" id="registerForm">
          <input class="input" type="text" id="name" placeholder="Full name" required />
          <input class="input" type="email" id="email" placeholder="Email" required />
          <input class="input" type="password" id="password" placeholder="Password" required />
          <button class="btn" type="submit">Register</button>
          <p class="small" style="margin:6px 0 0;">
            Already have an account? <a href="login.html">Sign in</a>
          </p>
          <div id="msg" class="small" style="margin-top:10px;"></div>
        </form>
      </div>
    </div>
  </main>
  <div id="footer"></div>
  <script type="module">
    import { initLayout } from "./assets/js/ui.js";
    initLayout();
  </script>
  <script type="module" src="assets/js/pages/register.js"></script>
</body>
</html>===== frontend/courses.html =====
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learnify | Courses</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div id="header"></div>
  <main class="main">
    <div class="container">
      <h2 style="margin:0 0 10px;">Courses</h2>
      <p class="small" style="margin:0 0 18px;">Choose a course and start learning.</p>
      <div id="msg" class="small" style="margin:10px 0;"></div>
      <div id="coursesList" class="courseList"></div>
    </div>
  </main>
  <div id="footer"></div>
  <script type="module">
    import { initLayout } from "./assets/js/ui.js";
    initLayout();
  </script>
  <script type="module" src="assets/js/pages/courses.js"></script>
</body>
</html>===== frontend/login.html =====
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learnify | Login</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div id="header"></div>
  <main class="main">
    <div class="container">
      <div class="card" style="max-width:520px;margin:0 auto;">
        <h2 style="margin:0 0 10px;">Sign in</h2>
        <p class="small" style="margin:0 0 16px;">Use your email and password to access courses.</p>
        <form class="form" id="loginForm">
          <input class="input" type="email" id="email" placeholder="Email" required />
          <input class="input" type="password" id="password" placeholder="Password" required />
          <button class="btn" type="submit">Login</button>
          <p class="small" style="margin:6px 0 0;">
            No account? <a href="register.html">Create one</a>
          </p>
          <div id="msg" class="small" style="margin-top:10px;"></div>
        </form>
      </div>
    </div>
  </main>
  <div id="footer"></div>
  <script type="module">
    import { initLayout } from "./assets/js/ui.js";
    initLayout();
  </script>
  <script type="module" src="assets/js/pages/login.js"></script>
</body>
</html>===== frontend/dashboard.html =====
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learnify | Progress</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div id="header"></div>

  <main class="main">
    <div class="container">
      <h2 style="margin:0 0 6px;">Progress</h2>
      <p class="small" id="roleLine" style="margin:0 0 14px;"></p>
      <div id="msg" class="small" style="margin:10px 0;"></div>

      <!-- STUDENT -->
     <section class="card" id="studentBox" style="display:none;">
      <h3 style="margin:0 0 14px;">My progress</h3>

      <div id="studentProgressList"></div>

    </section>


      <!-- INSTRUCTOR -->
      <section
        class="card"
        id="instructorBox"
        style="display:none; margin-top:16px;"
      >
        <h3 style="margin:0 0 10px;">Instructor panel</h3>

        <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
          <div class="card" style="background:#fff;">
            <h4 style="margin:0 0 10px;">Create course</h4>
            <form class="form" id="createCourseForm">
              <input class="input" id="cTitle" placeholder="Title" required />
              <input
                class="input"
                id="cDesc"
                placeholder="Description"
                required
              />
              <input
                class="input"
                id="cPrice"
                placeholder="Price (number)"
                type="number"
                min="0"
                required
              />
              <button class="btn" type="submit">Create</button>
            </form>
          </div>

          <div class="card" style="background:#fff;">
            <h4 style="margin:0 0 10px;">Add lesson to course</h4>
            <form class="form" id="addLessonForm">
              <input
                class="input"
                id="lCourseId"
                placeholder="Course ID"
                required
              />
              <input
                class="input"
                id="lTitle"
                placeholder="Lesson title"
                required
              />
              <input
                class="input"
                id="lContent"
                placeholder="Lesson content"
                required
              />
              <button class="btn" type="submit">Add lesson</button>
            </form>
          </div>
        </div>

        <div class="card" style="background:#fff; margin-top:16px;">
          <h4 style="margin:0 0 10px;">Add quiz to course</h4>
          <form class="form" id="addQuizForm" style="max-width:700px;">
            <input
              class="input"
              id="qCourseId"
              placeholder="Course ID"
              required
            />
            <input
              class="input"
              id="qTitle"
              placeholder="Quiz title"
              required
            />
            <textarea
              class="input"
              id="qTasks"
              placeholder='Tasks JSON (example: [{"question":"...","options":["A","B"],"correctAnswer":"A"}])'
              style="min-height:90px;"
              required
            ></textarea>
            <button class="btn" type="submit">Add quiz</button>
          </form>
          <div class="small" style="margin-top:8px;">
            Tasks are stored as an embedded array inside the course.
          </div>
        </div>
      </section>
    </div>
  </main>

  <div id="footer"></div>

  <script type="module">
    import { initLayout } from "./assets/js/ui.js";
    initLayout();
  </script>
  <script type="module" src="assets/js/pages/dashboard.js"></script>
</body>
</html>
===== frontend/course.html =====
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learnify | Course</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div id="header"></div>
  <main class="main">
    <div id="msg" class="small" style="margin:10px 0;"></div>

    <div class="courseLayout">
      <aside class="courseNav card">
        <h3>Course content</h3>

        <div class="navSection">
          <b>Lessons</b>
          <div id="navLessons"></div>
        </div>

        <div class="navSection">
          <b>Quizzes</b>
          <div id="navQuizzes"></div>
        </div>

      </aside>

      <section class="courseContent card">
        <h2 id="courseTitle">Loading...</h2>
        <p id="courseDesc" class="small"></p>

        <div id="actions" style="margin:12px 0;"></div>

        <div id="contentArea" style="margin-top:20px;">
          <div class="small">Select a lesson or quiz from the left.</div>
        </div>
      </section>
    </div>

  </main>
  <div id="footer"></div>
  <script type="module">
    import { initLayout } from "./assets/js/ui.js";
    initLayout();
  </script>
  <script type="module" src="assets/js/pages/course.js"></script>
</body>
</html>===== frontend/assets/css/styles.css =====
:root{
  --purple:#6b6fc9;
  --purple-dark:#5c60b8;
  --text:#111;
  --muted:#666;
  --bg:#ffffff;
  --card:#f6f7fb;
  --border:#e7e8f2;
}

*{box-sizing:border-box}
body{
  height: 100%;
  margin:0;
  font-family: Arial, Helvetica, sans-serif;
  background:var(--bg);
  color:var(--text);
}

.container{
  width:100%;
  max-width:1400px;
  margin:0 auto;
  padding:0 24px;
}

.topbar{
  background:var(--purple);
  color:#fff;
}

.topbar__inner{
  height:72px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 12px;
}

.brand__name{
  font-size:26px;
  font-weight:800;
  line-height:1;
}

.nav{
  display:flex;
  align-items:center;
  gap:20px;
}

.brand{
  display:flex;
  align-items:center;
  gap:12px;
  text-decoration:none;
  color:#fff;
}
.brand__logo{
  width:40px;height:40px;
  border-radius:10px;
  background:#fff;
  color:var(--purple);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
}

.nav__link{
  color:#fff;
  text-decoration:none;
  font-weight:700;
  letter-spacing:.5px;
  font-size:14px;
}
.nav__link:hover{opacity:.85}
.nav__link--btn{
  padding:8px 12px;
  border:1px solid rgba(255,255,255,.4);
  border-radius:999px;
}

.badge{
  padding:6px 10px;
  border-radius:999px;
  background:rgba(255,255,255,.18);
  font-weight:700;
  font-size:12px;
}

.main{
  min-height: calc(100vh - 140px);
  padding:40px 0;
}

.card{
  background:#ffffff;
  border:1px solid #c1c6e6;
  border-radius:18px;
  padding:22px;
  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.12);
}

.btn{
  display:inline-block;
  background:var(--purple);
  color:#fff;
  border:none;
  padding:12px 18px;
  border-radius:999px;
  font-weight:800;
  cursor:pointer;
  text-decoration:none;
}
.btn:hover{background:var(--purple-dark)}

.input{
  width:100%;
  padding:12px 14px;
  border-radius:12px;
  border:1px solid #bbc0e2; 
  outline:none;
  background:#fff;
}
.input:focus{border-color:var(--purple)}

.form{
  display:grid;
  gap:12px;
}

.small{
  color:var(--muted);
  font-size:14px;
}

.footer{
  background:var(--purple);
  color:#fff;
}

.footer__inner{
  height:90px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:20px;
  font-size:14px;
  padding:0 12px;
}

.footer__center{ text-align:center; opacity:.95; }
.footer__icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:36px;height:36px;
  border-radius:12px;
  background:rgba(255,255,255,.18);
  margin-left:10px;
  font-weight:800;
}

.footer__left, .footer__center, .footer__right{
  line-height:1.3;
}

.grid{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:16px;
}

@media (max-width: 900px){
  .grid{ grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 600px){
  .grid{ grid-template-columns: 1fr; }
}

.courseCard{
  background:#f6f7fb;
  border:1px solid var(--border);
  border-radius:18px;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  min-height:180px;
}
.courseCard__title{
  font-size:18px;
  font-weight:900;
  margin:0;
}
.courseCard__desc{
  margin:0;
  color:var(--muted);
  font-size:14px;
  line-height:1.35;
}
.courseCard__meta{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  align-items:center;
  margin-top:auto;
}
.pill{
  background:rgba(107,111,201,.15);
  color:var(--purple-dark);
  padding:6px 10px;
  border-radius:999px;
  font-weight:800;
  font-size:12px;
}
.btnRow{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:8px;
}
.btnSecondary{
  background:transparent;
  border:1px solid var(--border);
  padding:12px 14px;
  border-radius:999px;
  font-weight:800;
  cursor:pointer;
}
.btnSecondary:hover{ border-color: var(--purple); }
.courseList{
  display:flex;
  flex-direction:column;
  gap:22px;
}

.courseHero{
  display:grid;
  grid-template-columns: 420px 1fr;
  gap:26px;
  padding:22px;
  border:1px solid var(--border);
  border-radius:22px;
  background:#fff;
  box-shadow: 0 14px 40px rgba(16,24,40,0.08);
}

@media (max-width: 900px){
  .courseHero{ grid-template-columns: 1fr; }
}

.courseHero__imgWrap{
  border-radius:18px;
  overflow:hidden;
  border:8px solid rgba(107,111,201,0.22);
  background:#f3f4ff;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:260px;
}

.courseHero__img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}

.courseHero__title{
  font-size:44px;
  line-height:1.05;
  margin:0 0 10px;
}

.courseHero__desc{
  margin:0 0 14px;
  color:var(--muted);
  line-height:1.5;
  max-width:650px;
}

.bullets{
  margin:0 0 18px;
  padding-left:18px;
  color:#222;
}
.bullets li{ margin:8px 0; }

.startBtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:160px;
}

.listItem{
  padding:10px 12px;
  border:1px solid var(--border);
  border-radius:14px;
  background:#fff;
  margin-bottom:10px;
}

.qBox{
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
  background:#fff;
  margin-bottom:12px;
}
.qTitle{
  font-weight:900;
  margin:0 0 6px;
}
.qMeta{
  font-size:12px;
  color:var(--muted);
  margin:0 0 8px;
}
.answer{
  padding:10px 12px;
  border-radius:12px;
  background:rgba(107,111,201,.08);
  margin-top:8px;
}
/* ===== HERO (index page) ===== */

.hero{
  display:grid;
  grid-template-columns: 1fr 1fr;
  align-items:center;
  gap:40px;
  min-height:520px;
}

.hero__left{
  display:flex;
  flex-direction:column;
  gap:16px;
}

.hero__badge{
  font-weight:900;
  font-size:14px;
  letter-spacing:1px;
  color:#000;
}

.hero__title{
  font-size:64px;
  line-height:1;
  margin:0;
  font-weight:900;
  color:var(--purple);
}

.hero__subtitle{
  font-size:20px;
  color:#000;
  margin:0 0 10px;
}

.hero__btn{
  width:160px;
  justify-content:center;
}

.hero__right{
  display:flex;
  justify-content:center;
  align-items:center;
}

.hero__img{
  max-width:100%;
  height:auto;
}

/* Responsive */
@media (max-width: 900px){
  .hero{
    grid-template-columns: 1fr;
    text-align:center;
  }

  .hero__left{
    align-items:center;
  }

  .hero__title{
    font-size:48px;
  }
}

.courseLayout{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap:20px;
}

.courseNav{
  height: fit-content;
}

.navSection{
  margin-top:14px;
}

.navItem{
  padding:8px 10px;
  border-radius:10px;
  cursor:pointer;
  font-size:14px;
  margin-top:6px;
  border:1px solid var(--border);
  background:#fff;
}

.navItem:hover{
  background:rgba(107,111,201,.08);
}

.courseContent{
  min-height:400px;
}

@media (max-width: 900px){
  .courseLayout{
    grid-template-columns: 1fr;
  }
}

.progressBar {
  width: 100%;
  height: 22px;
  background: #eee;
  border-radius: 999px;
  overflow: hidden;
}

.progressFill {
  height: 100%;
  background: var(--purple);
  color: #fff;
  font-weight: 800;
  font-size: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}
===== frontend/assets/js/ui.js =====
import { isLoggedIn, getRole, logout } from "./auth.js";

async function loadPartial(selector, file) {
  const el = document.querySelector(selector);
  if (!el) return;
  const res = await fetch(file);
  el.innerHTML = await res.text();
}

function updateNav() {
  const role = getRole();
  const logged = isLoggedIn();

  const signInLink = document.querySelector('[data-nav="signin"]');
  const dashboardLink = document.querySelector('[data-nav="dashboard"]');
  const logoutBtn = document.querySelector('[data-nav="logout"]');
  const roleBadge = document.querySelector('[data-nav="role"]');

  if (signInLink) signInLink.style.display = logged ? "none" : "inline-block";
  if (dashboardLink) dashboardLink.style.display = logged ? "inline-block" : "none";
  if (logoutBtn) logoutBtn.style.display = logged ? "inline-block" : "none";

  if (roleBadge) {
    roleBadge.textContent = logged ? role : "";
    roleBadge.style.display = logged ? "inline-block" : "none";
  }

  if (logoutBtn) {
    logoutBtn.addEventListener("click", (e) => {
      e.preventDefault();
      logout();
    });
  }
}

export async function initLayout() {
  await loadPartial("#header", "partials/header.html");
  await loadPartial("#footer", "partials/footer.html");
  updateNav();
}
===== frontend/assets/js/auth.js =====
const TOKEN_KEY = "learnify_token";

/* save ONLY token */
export function saveAuth(token) {
  localStorage.setItem(TOKEN_KEY, token);
}

export function getToken() {
  return localStorage.getItem(TOKEN_KEY);
}

function parseJwt(token) {
  try {
    const base64Url = token.split(".")[1];
    const base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
    return JSON.parse(atob(base64));
  } catch {
    return null;
  }
}

/* ðŸ”¥ ROLE FROM TOKEN */
export function getRole() {
  const token = getToken();
  if (!token) return null;

  const payload = parseJwt(token);
  return payload?.role || null;
}

export function isLoggedIn() {
  return !!getToken();
}

export function logout() {
  localStorage.removeItem(TOKEN_KEY);
  window.location.href = "index.html";
}
===== frontend/assets/js/config.js =====
export const BASE_URL = "http://localhost:3000/api";===== frontend/assets/js/api.js =====
import { BASE_URL } from "./config.js";
import { getToken } from "./auth.js";

export async function apiRequest(path, { method = "GET", body = null, auth = false } = {}) {
  const headers = { "Content-Type": "application/json" };

  if (auth) {
    const token = getToken();
    if (token) headers["Authorization"] = `Bearer ${token}`;
  }

  const res = await fetch(`${BASE_URL}${path}`, {
    method,
    headers,
    body: body ? JSON.stringify(body) : null,
  });

  const data = await res.json().catch(() => ({}));

  if (res.status === 401) {
    localStorage.removeItem("lernify_token");

    if (!window.location.pathname.includes("login.html")) {
      const next = encodeURIComponent(
        window.location.pathname + window.location.search
      );
      window.location.href = `login.html?next=${next}`;
    }

    throw new Error("Unauthorized");
  }

  if (!res.ok) {
    const msg =
      data?.message ||
      data?.error ||
      `Request failed (${res.status})`;
    throw new Error(msg);
  }

  return data;
}===== frontend/assets/js/pages/course.js =====
import { apiRequest } from "../api.js";
import { getRole, isLoggedIn } from "../auth.js";


const msg = document.getElementById("msg");

const titleEl = document.getElementById("courseTitle");
const descEl = document.getElementById("courseDesc");
const actionsEl = document.getElementById("actions");

const navLessons = document.getElementById("navLessons");
const navQuizzes = document.getElementById("navQuizzes");
const openQA = document.getElementById("openQA");
const contentArea = document.getElementById("contentArea");


let currentCourse = null;
let isEnrolled = false;

function show(text, ok = false) {
  msg.textContent = text;
  msg.style.color = ok ? "green" : "crimson";
}

function escapeHtml(s = "") {
  return s
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;");
}

function getCourseId() {
  return new URLSearchParams(window.location.search).get("id");
}

function getYoutubeEmbed(url) {
  if (!url) return null;

  const match = url.match(
    /(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/
  );

  return match ? `https://www.youtube.com/embed/${match[1]}` : null;
}

async function checkEnrollment(courseId) {
  if (!isLoggedIn() || getRole() !== "student") return false;

  const data = await apiRequest("/enrollments/my", { auth: true });
  if (!Array.isArray(data)) return false;

  return data.some(
    e => e.courseId?._id === courseId || e.courseId === courseId
  );
}

async function enroll(courseId) {
  try {
    await apiRequest("/enrollments", {
      method: "POST",
      body: { courseId },
      auth: true
    });

    isEnrolled = true;
    renderActions(courseId);
    openLessonByIndex(0);
    show("Enrolled successfully!", true);
  } catch (e) {
    show(e.message || "Enroll failed");
  }
}


function renderActions(courseId) {
  actionsEl.innerHTML = "";

  if (!isLoggedIn()) {
    actionsEl.innerHTML = `
      <a class="btn" href="login.html?next=${encodeURIComponent(
        `course.html?id=${courseId}`
      )}">
        Login to enroll
      </a>
    `;
    return;
  }

  if (getRole() === "student" && !isEnrolled) {
    const btn = document.createElement("button");
    btn.className = "btn";
    btn.textContent = "Enroll";
    btn.onclick = () => enroll(courseId);
    actionsEl.appendChild(btn);
  }

  // if enrolled -> show nothing
}


function openLessonByIndex(index = 0) {
  const l = currentCourse?.lessons?.[index];
  if (!l) return;

  const embedUrl = getYoutubeEmbed(l.videoUrl);

  contentArea.innerHTML = `
    <h3>${escapeHtml(l.title)}</h3>

    ${
      embedUrl
        ? `
          <div style="margin:16px 0;">
            <iframe
              width="100%"
              height="400"
              src="${embedUrl}"
              title="Lesson video"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>
        `
        : ""
    }

    <p class="small">${escapeHtml(l.content || "")}</p>
  `;
}

function renderNavLessons(lessons = []) {
  navLessons.innerHTML = lessons.length
    ? lessons
        .map(
          (l, i) => `
        <div class="navItem" data-lesson="${i}">
          Lesson ${i + 1}: ${escapeHtml(l.title)}
        </div>
      `
        )
        .join("")
    : `<div class="small">No lessons</div>`;

  navLessons.querySelectorAll("[data-lesson]").forEach(el => {
    el.onclick = () => openLessonByIndex(Number(el.dataset.lesson));
  });
}

function renderNavQuizzes(quizzes = []) {
  navQuizzes.innerHTML = quizzes.length
    ? quizzes
        .map(
          (q, i) => `
        <div class="navItem" data-quiz="${i}">
          Quiz ${i + 1}: ${escapeHtml(q.title)}
        </div>
      `
        )
        .join("")
    : `<div class="small">No quizzes</div>`;

  navQuizzes.querySelectorAll("[data-quiz]").forEach(el => {
    el.onclick = () => {
      const q = currentCourse.quizzes[el.dataset.quiz];
      contentArea.innerHTML = `
        <h3>${escapeHtml(q.title)}</h3>
        <div class="small">Tasks: ${(q.tasks || []).length}</div>
      `;
    };
  });
}

async function load() {
  const courseId = getCourseId();
  if (!courseId) return show("No course id");

  try {
    const course = await apiRequest(`/courses/${courseId}`, { auth: true });
    currentCourse = course;

    titleEl.textContent = course.title;
    descEl.textContent = course.description;

    isEnrolled = await checkEnrollment(courseId);

    renderActions(courseId);
    renderNavLessons(course.lessons || []);
    renderNavQuizzes(course.quizzes || []);

    if (isEnrolled && course.lessons?.length > 0) {
      openLessonByIndex(0);
    } else {
      contentArea.innerHTML = `
        <div class="small">
          Select a lesson, quiz or Q&A from the left menu.
        </div>
      `;
    }

  } catch (e) {
    show(e.message || "Failed to load course");
  }
}

load();
===== frontend/assets/js/pages/register.js =====
import { apiRequest } from "../api.js";

const form = document.getElementById("registerForm");
const msg = document.getElementById("msg");

function show(text, ok = false) {
  msg.textContent = text;
  msg.style.color = ok ? "green" : "crimson";
}

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  show("");

  const name = document.getElementById("name").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;

  try {
    await apiRequest("/auth/register", {
      method: "POST",
      body: { name, email, password },
      auth: false,
    });

    show("Registration successful! Please login.", true);
    setTimeout(() => (window.location.href = "login.html"), 700);
  } catch (err) {
    show(err.message || "Registration failed");
  }
});
===== frontend/assets/js/pages/login.js =====
import { apiRequest } from "../api.js";
import { saveAuth } from "../auth.js";

const form = document.getElementById("loginForm");
const msg = document.getElementById("msg");

function show(text, ok = false) {
  msg.textContent = text;
  msg.style.color = ok ? "green" : "crimson";
}

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  show("");

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;

  try {
    const data = await apiRequest("/auth/login", {
      method: "POST",
      body: { email, password },
      auth: false,
    });

    // ðŸ”¥ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð¢ÐžÐ›Ð¬ÐšÐž Ñ‚Ð¾ÐºÐµÐ½
    saveAuth(data.token);

    show("Login successful! Redirecting...", true);

    // ðŸ‘‰ ÑÑ€Ð°Ð·Ñƒ Ð½Ð° dashboard
    setTimeout(() => {
      window.location.href = "courses.html";
    }, 500);

  } catch (err) {
    show(err.message || "Login failed");
  }
});===== frontend/assets/js/pages/courses.js =====
import { apiRequest } from "../api.js";
import { isLoggedIn } from "../auth.js";

const list = document.getElementById("coursesList");
const msg = document.getElementById("msg");

let enrolledIds = [];

function show(text, ok=false){
  msg.textContent = text;
  msg.style.color = ok ? "green" : "crimson";
}

function escapeHtml(s=""){
  return s.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;");
}

async function loadEnrollments() {
  if (!isLoggedIn()) return [];
  const data = await apiRequest("/enrollments/my", { auth:true });
  return data.map(e => e.courseId?._id || e.courseId);
}

async function enroll(courseId) {
  await apiRequest("/enrollments", {
    method:"POST",
    body:{ courseId },
    auth:true
  });
  window.location.href = `course.html?id=${courseId}`;
}

function render(courses) {
  list.innerHTML = courses.map(c=>{
    const id = c._id || c.id;
    const enrolled = enrolledIds.includes(id);

    return `
      <section class="courseHero">
        <div>
          <h3>${escapeHtml(c.title)}</h3>
          <p>${escapeHtml(c.description)}</p>

          <button class="btn"
            data-id="${id}"
            data-action="${enrolled ? "open" : "enroll"}">
            ${enrolled ? "Open course" : "Enroll"}
          </button>
        </div>
      </section>
    `;
  }).join("");

  document.querySelectorAll("button[data-id]").forEach(btn=>{
    const id = btn.dataset.id;
    if (btn.dataset.action === "open") {
      btn.onclick = () => window.location.href = `course.html?id=${id}`;
    } else {
      btn.onclick = () => enroll(id);
    }
  });
}

async function loadCourses() {
  try {
    show("Loading...", true);
    const data = await apiRequest("/courses", { auth: true });
    const courses = data.courses || data;

    enrolledIds = await loadEnrollments();
    render(courses);
    show("");
  } catch (e) {
    show(e.message || "Failed to load courses");
  }
}

loadCourses();
===== frontend/assets/js/pages/dashboard.js =====
import { apiRequest } from "../api.js";
import { getRole, isLoggedIn } from "../auth.js";

const msg = document.getElementById("msg");
const roleLine = document.getElementById("roleLine");
const progressList = document.getElementById("studentProgressList");

const studentBox = document.getElementById("studentBox");
const instructorBox = document.getElementById("instructorBox");

function show(text, ok = false) {
  msg.textContent = text;
  msg.style.color = ok ? "green" : "crimson";
}

function esc(s = "") {
  return s
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;");
}

function requireLogin() {
  if (!isLoggedIn()) {
    window.location.href = "login.html?next=dashboard.html";
    return false;
  }
  return true;
}

function showPanel(role) {
  studentBox.style.display = role === "student" ? "block" : "none";
  instructorBox.style.display = role === "instructor" ? "block" : "none";
}

(function init() {
  if (!requireLogin()) return;
  const role = getRole();
  roleLine.textContent = `Logged in role: ${role}`;
  showPanel(role);
  if (role === "student") {
    loadStudentProgress();
  }
})();

/* ---------- STUDENT ---------- */

document.getElementById("btnProgress")?.addEventListener("click", async () => {
  const courseId = document.getElementById("studentCourseId").value.trim();
  const progress = Number(document.getElementById("studentProgress").value);

  try {
    show("");
    await apiRequest("/enrollments/progress", {
      method: "PATCH",
      body: { courseId, progress },
      auth: true
    });
    show("Progress updated!", true);
  } catch (e) {
    show(e.message || "Progress update failed");
  }
});

async function loadStudentProgress() {
  try {
    const enrollments = await apiRequest("/enrollments/my", { auth: true });

    if (!enrollments.length) {
      progressList.innerHTML =
        `<div class="small">You are not enrolled in any courses yet.</div>`;
      return;
    }

    progressList.innerHTML = enrollments.map(e => `
      <div class="card" style="margin-bottom:14px;">
        <h4 style="margin:0 0 6px;">${esc(e.courseId.title)}</h4>
        <p class="small" style="margin:0 0 10px;">
          ${esc(e.courseId.description || "")}
        </p>

        <div class="progressBar">
          <div class="progressFill" style="width:${e.progress}%">
            ${e.progress}%
          </div>
        </div>

        <a class="btn" style="margin-top:10px;display:inline-block;"
           href="course.html?id=${e.courseId._id}">
          Open course
        </a>
      </div>
    `).join("");

  } catch (e) {
    show(e.message || "Failed to load progress");
  }
}

/* ---------- INSTRUCTOR ---------- */

document
  .getElementById("createCourseForm")
  ?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const title = document.getElementById("cTitle").value.trim();
    const description = document.getElementById("cDesc").value.trim();
    const price = Number(document.getElementById("cPrice").value);

    try {
      show("");
      const data = await apiRequest("/courses", {
        method: "POST",
        body: { title, description, price },
        auth: true
      });
      show(`Course created! ID: ${data._id || data.id}`, true);
      e.target.reset();
    } catch (err) {
      show(err.message || "Create course failed");
    }
  });

document
  .getElementById("addLessonForm")
  ?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const courseId = document.getElementById("lCourseId").value.trim();
    const title = document.getElementById("lTitle").value.trim();
    const content = document.getElementById("lContent").value.trim();

    try {
      show("");
      await apiRequest(`/courses/${courseId}/lessons`, {
        method: "POST",
        body: { title, content },
        auth: true
      });
      show("Lesson added!", true);
      e.target.reset();
    } catch (err) {
      show(err.message || "Add lesson failed");
    }
  });

document
  .getElementById("addQuizForm")
  ?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const courseId = document.getElementById("qCourseId").value.trim();
    const title = document.getElementById("qTitle").value.trim();
    const tasksRaw = document.getElementById("qTasks").value.trim();

    try {
      show("");
      const tasks = JSON.parse(tasksRaw);
      await apiRequest(`/courses/${courseId}/quizzes`, {
        method: "POST",
        body: { title, tasks },
        auth: true
      });
      show("Quiz added!", true);
      e.target.reset();
    } catch (err) {
      show(err.message || "Add quiz failed (check JSON tasks)");
    }
  });===== frontend/partials/footer.html =====
<footer class="footer">
  <div class="container footer__inner">
    <div class="footer__left">
      <div>Call center: +7 707 706 12 11</div>
      <div>242395@astanait.edu.kz</div>
    </div>
    <div class="footer__center">
      Thank you for learning with us! <br />
      Â© 2026 | Learnify.
    </div>
    <div class="footer__right">
      <span class="footer__icon">IG</span>
      <span class="footer__icon">YT</span>
    </div>
  </div>
</footer>===== frontend/partials/header.html =====
<header class="topbar">
  <div class="container topbar__inner">
    <a class="brand" href="index.html">
      <div class="brand__logo">L</div>
      <span class="brand__name">Learnify</span>
    </a>
    <nav class="nav">
      <a class="nav__link" href="index.html">HOME</a>
      <a class="nav__link" href="courses.html">COURSES</a>
      <a class="nav__link" href="dashboard.html" data-nav="dashboard" style="display:none;">PROGRESS</a>
      <a class="nav__link" href="login.html" data-nav="signin">SIGN IN</a>
      <span class="badge" data-nav="role" style="display:none;"></span>
      <a class="nav__link nav__link--btn" href="#" data-nav="logout" style="display:none;">LOG OUT</a>
    </nav>
  </div>
</header>